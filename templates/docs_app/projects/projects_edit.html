{% include 'includes/layout.html' %}

<div class="container">
    <div class="card">
        <div class="card-header">
            Редактирование данных проекта
        </div>
        <div class="card-body">
            <form method="post">
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label>Наименование проекта</label>
                        <input type="text" class="form-control" name="name_project"
                               value="{{ project.name_project }}" placeholder="Наименование проекта"
                               required>
                    </div>
                    <div class="form-group col-md-6">
                        <label>Шифр проект</label>
                        <input type="text" class="form-control" name="code_project" placeholder="Шифр"
                               value="{{ project.code_project }}" required>
                    </div>
                </div>
                <div class="form-group">
                    <label>Описание проекта</label>
                    <textarea class="form-control" rows="3" name="description_project" required>{{ project.description_project }}</textarea>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-6 was-validated">
                        <select class="custom-select" name="object_id" required>
                            <option value="">Выберите объект</option>
                            {% for obj in objects %}
                            <option {% if obj.id== project.object_id %} selected="selected" {% endif %} value={{obj.id}}>{{ obj.name_object }}</option>
                            {% endfor %}
                        </select>
                        <div class="invalid-feedback">Должен быть выбран проект</div>
                    </div>
                </div>


                <button type="submit" class="btn btn-primary">Сохранить</button>
                <button onclick="delete_project('{{ project.id }}'); return false;"
                        type="button" class="btn btn-danger">Удалить
                </button>
                <script>
                    function delete_project(project_id) {
                        if (window.confirm('Проект будет удален?')) {
                            window.location.href = '/projects/delete/' + project_id;
                        }
                    }
                </script>
            </form>
        </div>
    </div>
</div>